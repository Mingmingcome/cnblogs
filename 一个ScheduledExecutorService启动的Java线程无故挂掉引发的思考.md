`2018年12月12日18:44:53`

## 一个ScheduledExecutorService启动的Java线程无故挂掉引发的思考

####  案件现场

不久前，在开发改造公司一个端到端监控日志系统的时候，出现了一个bug：有个扫表写日志的线程无故挂掉。

#### 顺藤摸瓜

我看了很久的代码，都没有想出来有什么地方有逻辑问题。万金油的方法是，重启。当我满心欢喜地认为重启是个好方法的时候，问题又重现了。

我有点无奈地看着自己的代码

>本我：堪称完美的逻辑，还有什么地方是我没有注意到的吗？

>真我：当然有了，你这个菜鸟，你不知道的地方多着呢。

于是，去找老大问一下问题怎么解决，老大说去生产数据库上导十万数据到测试库，然后在本地debug一下。接着，我就从数据库里面导出一万数据开始测试，在eclipse启动进程，日志写在本地文件。很快，问题再一次出现。然后断点，然后找到出问题的地方。出问题的地方如下：
!(问题地点)[]
